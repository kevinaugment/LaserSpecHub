# Quick Test Guide - 快速测试指南

## 🚀 快速开始

### 1. 安装依赖 (如果还没安装)
```bash
npm install
```

### 2. 运行数据库迁移
```bash
npm run db:migrate
```

这将执行所有新的迁移文件：
- ✅ 0005_users_and_auth.sql (用户认证)
- ✅ 0006_update_submissions.sql (审核字段)
- ✅ 0007_user_system.sql (用户系统)
- ✅ 0008_equipment_images.sql (图片上传)

### 3. 创建初始管理员账号
```bash
node scripts/create-admin.js
```

按照提示输入管理员邮箱和密码。

### 4. 启动开发服务器
```bash
npm run dev
```

访问: http://localhost:3000

---

## ✅ 功能测试清单

### 🔐 认证系统测试

#### 管理员登录
1. 访问 `/admin/login`
2. 使用创建的管理员账号登录
3. 验证可以访问 `/admin` 控制台

#### 用户注册
1. 点击Header中的 "Sign Up" 或访问 `/auth/register`
2. 填写表单注册新用户
3. 验证自动登录功能

#### 用户登录
1. 点击Header中的 "Sign In" 或访问 `/auth/login`
2. 使用注册的账号登录
3. 验证用户菜单显示

### 🧭 Mega Menu导航测试

#### Tools菜单
1. 在桌面端，悬停 "Tools" 菜单
2. 验证显示8个计算器工具的Mega Menu
3. 点击任意工具，验证跳转正确

#### Guides菜单
1. 悬停 "Guides" 菜单
2. 验证显示4大分类的指南菜单
3. 点击任意指南，验证跳转正确

#### 移动端菜单
1. 在移动设备或浏览器开发者工具的移动模式下
2. 点击菜单按钮
3. 验证移动端导航菜单展开
4. 测试所有链接是否正常工作

### ⭐ 用户功能测试

#### 收藏功能
1. 登录用户账号
2. 访问任意设备详情页 (`/equipment/[id]`)
3. 点击 "Add to Favorites" 按钮
4. 验证按钮状态变为 "Favorited"
5. 访问 `/profile?tab=favorites`
6. 验证收藏的设备显示在列表中

#### 对比保存功能
1. 登录用户账号
2. 访问对比页面 (`/comparison`)
3. 选择2-5个设备进行对比
4. 点击 "Save Comparison" 按钮
5. 输入对比名称并保存
6. 验证保存成功提示
7. 访问 `/profile?tab=comparisons`
8. 验证保存的对比显示在列表中
9. 点击保存的对比，验证能正确加载

### 📸 图片上传测试 (需要管理员权限)

#### 上传图片
1. 使用管理员账号登录
2. 访问 `/admin/equipment`
3. 编辑或创建一个设备
4. 在设备表单底部找到 "Equipment Images" 部分
5. 选择一张图片 (JPEG/PNG/WebP, < 5MB)
6. 填写图片信息 (类型、Alt文本、标题等)
7. 可选择设置为 "Primary Image"
8. 点击 "Upload Image"
9. 验证上传成功

#### 查看图片
1. 访问设备详情页 (`/equipment/[id]`)
2. 验证 "Product Images" 区域显示上传的图片
3. 验证主图标记显示正确
4. 验证图片标题显示正确

#### 删除图片 (管理员)
1. 在设备表单的图片管理区域
2. 悬停图片查看删除按钮
3. 点击删除并确认
4. 验证图片从列表中移除

### 📝 用户提交审核测试

#### 提交设备信息
1. 未登录或登录用户访问 `/equipment/submit`
2. 填写设备提交表单
3. 提交表单
4. 验证提交成功提示

#### 管理员审核
1. 使用管理员账号登录
2. 访问 `/admin/submissions`
3. 验证看到待审核的提交
4. 点击 "View Details" 查看详情
5. 添加审核备注 (可选)
6. 点击 "Approve" 或 "Reject"
7. 验证审核操作成功
8. 验证审核后状态更新

---

## 🐛 常见问题排查

### 问题1: 用户菜单不显示
**原因**: SessionProvider未正确配置  
**解决**: 检查 `app/layout.tsx` 是否包含 `<Providers>`

### 问题2: Mega Menu不显示
**原因**: CSS样式未加载  
**解决**: 检查 `tailwind.config.ts` 配置，确保包含所有组件路径

### 问题3: 图片上传失败
**原因**: 
- 上传目录不存在
- 文件大小超过5MB
- 文件类型不支持

**解决**: 
- 确保 `/public/uploads/equipment` 目录存在
- 检查文件大小和类型
- 查看浏览器控制台错误信息

### 问题4: 数据库迁移失败
**原因**: 迁移文件语法错误或数据库连接问题  
**解决**: 
- 检查数据库连接配置
- 查看迁移脚本错误日志
- 手动验证SQL语法

### 问题5: 认证失败
**原因**: 
- NEXTAUTH_SECRET未设置
- 数据库连接问题

**解决**: 
- 检查 `.env` 文件中的环境变量
- 验证数据库表结构是否正确创建

---

## 📊 测试数据建议

### 创建测试用户
- **管理员**: admin@test.com
- **普通用户**: user@test.com

### 测试设备数据
- 创建至少3-5个测试设备用于对比功能
- 为每个设备上传1-3张测试图片

### 测试提交数据
- 创建2-3个用户提交用于测试审核流程

---

## ✨ 下一步

完成基本测试后，可以：
1. 运行完整的lint检查: `npm run lint`
2. 运行类型检查: `npm run type-check`
3. 构建生产版本: `npm run build`
4. 准备部署到Vercel或其他平台

---

**提示**: 如果遇到任何问题，请检查浏览器控制台和终端日志获取详细错误信息。




